<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_report_delivery_note">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <style>
                    table.table-bordered { 
                        border-top: 1px solid black;
                        border-right: 1px solid black;
                        border-bottom: 1px solid black;
                        border-left: 1px solid black;
                        border-collapse: collapse;
                        margin-top: 0px; width: 100%;
                        table-layout: auto;
                    }
                </style>
                <div class="page">
                    <table style="border-collapse: collapse;">
                        <tr>
                            <td>
                                <img t-if="o.env.user.company_id.logo"
                                    style="max-width: 340px; max-height: 150px;"
                                    t-att-src="image_data_uri(o.env.user.company_id.logo)"
                                    alt="Logo"/>
                            </td>
                        </tr>
                    </table>
                    <br/>
                    <div style="font-weight:bold;">
                        Delivery Note No : <span t-esc="o.name"/>
                    </div>
                    <br/>
                    <table class="table table-borderless" style="width:100%;font-weight:bold;">
                        <tr>
                            <td>Date: <span t-if="o.date_done" t-esc="(o.date_done + relativedelta(hours=+7)).strftime('%d-%B-%Y')"/></td>
                            <td>Order No.: <span t-esc="o.partner_id.name"/> </td>
                        </tr>
                        <tr>
                            <td>Vendor Details :</td>
                        </tr>
                    </table>
                    <div style="width:100%;font-weight:bold;">
                        <div t-field="o.partner_id"/>
                        <div t-field="o.partner_id.contact_address_complete"/>
                        <div t-esc="o.partner_id.phone"/>
                        <div t-esc="o.partner_id.email"/>
                    </div>
                    <br/>
                    <div style="width:100%;height:60px;font-weight:bold;">
                        <div>Delivery Address :</div>
                        <div>Delivered by: <span t-field="o.partner_id.ship_to"/></div>
                    </div>
                    <br/>
                    <table class="table table-bordered">
                        <thead >
                            <tr style="font-size:14px">
                                <th style="border: 1px solid black;">Product Code</th>
                                <th style="border: 1px solid black;">Product Name</th>
                                <th style="border: 1px solid black;">Delivered</th>
                                <th style="border: 1px solid black;">Lot/Serial Number</th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-set="col" t-value="0"/>
                            <t t-foreach="o.move_line_ids" t-as="sml_line">
                                <tr style="border: 1px solid black;height: 20px;font-size:12px">
                                    <td style="border: 1px solid black;text-align:left;">
                                        <span t-esc="sml_line.product_id.default_code"/>
                                    </td>
                                    <td style="border: 1px solid black;text-align:left;">
                                        <span t-esc="sml_line.product_id.name"/>
                                    </td>
                                    <td style="border: 1px solid black;text-align:center;">
                                        <span t-esc="sml_line.quantity"/> <span t-esc="sml_line.product_uom_id.name"/>
                                    </td>
                                    <td style="border: 1px solid black;text-align:left;">
                                        <span t-if="sml_line.lot_id" t-esc="sml_line.lot_id.name"/>
                                    </td>
                                </tr>
                            </t>
                        </tbody>
                    </table>
                    <br/>
                    <div>Notes:
                        <!-- <div>Notes: </div> -->
                        <ul>
                            <li>Please inspect your delivery and report any issues immediately.</li>
                            <li>This delivery will be deemed correct and accepted unless a discrepancy is reported within five (5) business days.</li>
                            <li><span style="margin-right:2px;">Please report all issues or discrepancies to</span> <span style="color:blue;">receivable@auliacosmetic.com.</span> </li>
                        </ul>
                    </div>
                    <br/>
                    <table class="table" style="width:100%;page-break-inside: avoid;font-size: 14px;">
                        <tr>
                            <td style="text-align:center;width:25%;">
                                <strong><span>Issued by,</span></strong>
                            </td>
                            <td style="text-align:center;width:25%;">
                                <strong><span>Warehouse,</span></strong>
                            </td>
                            <td style="text-align:center;width:25%;">
                                <strong><span>Delivered by,</span></strong>
                            </td>
                            <td style="text-align:center;width:25%;">
                                <strong><span>Received by,</span></strong>
                            </td>
                        </tr>
                        <tr>
                            <td style="text-align:center;">
                                <span t-esc="o.create_uid.name"/>
                                <!-- <span t-esc="o.review_apr_ids[0].requested_by.name"/> -->
                            </td>
                            <td style="text-align:center;">
                                <!-- <span t-esc="o.review_apr_ids[-1].requested_by.name"/> -->
                            </td>
                            <td style="text-align:center;">
                                <!-- <span t-esc="o.review_apr_ids[0].requested_by.name"/> -->
                            </td>
                            <td style="text-align:center;">
                                <!-- <span t-esc="o.review_apr_ids[0].requested_by.name"/> -->
                            </td>
                        </tr>
                        <tr>
                            <td style="text-align:center;vertical-align: top;">
                                <span t-esc="(o.create_date + relativedelta(hours=7)).strftime('%d-%B-%Y')"/>
                            </td>
                            <td style="text-align:center;vertical-align: top;">
                                <!-- <span t-esc="o.review_apr_ids[-1].requested_by.function"/> -->
                            </td>
                            <td style="text-align:center;vertical-align: top;">
                                <!-- <span t-esc="o.review_apr_ids[-1].requested_by.function"/> -->
                            </td>
                            <td style="text-align:center;vertical-align: top;">
                                <!-- <span t-esc="o.review_apr_ids[-1].requested_by.function"/> -->
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="footer">
                    <img src="/bmo_report/static/img/footer.jpeg" style="width:100%; max-height:90px;"/>
                    <div class="text-end text-muted">
                        <div t-if="report_type == 'pdf' and display_name_in_footer" t-out="o.name">(document name)</div>
                        <div t-if="report_type == 'pdf'">Page <span class="page"/> / <span class="topage"/></div>
                    </div>
                </div>
            </t>
        </t>
    </template>

    <record id="action_report_delviery_note" model="ir.actions.report">
        <field name="name">Delivery Note</field>
        <field name="model">stock.picking</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">bmo_report.report_report_delivery_note</field>
        <field name="report_file">bmo_report.report_report_delivery_note</field>
        <field name="print_report_name">'Delivery Note - %s' % object.name</field>
        <field name="binding_model_id" ref="stock.model_stock_picking"/>
        <field name="paperformat_id" ref="bmo_report.report_do_paperformat" />
        <field name="binding_type">report</field>
    </record>
</odoo>